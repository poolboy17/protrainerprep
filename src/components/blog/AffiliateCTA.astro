---
export interface Props {
  title?: string;
  description?: string;
  affiliateUrl: string;
  affiliateLabel?: string;
  variant?: 'primary' | 'subtle';
}

const {
  title = 'Ready to get certified?',
  description,
  affiliateUrl,
  affiliateLabel = 'Check Current Price',
  variant = 'primary',
} = Astro.props;

const isPrimary = variant === 'primary';
---

<div class:list={[
  'not-prose my-8 rounded-xl p-6 text-center',
  isPrimary
    ? 'bg-gradient-to-r from-primary to-secondary text-white shadow-lg'
    : 'border-2 border-dashed border-primary/30 bg-green-50/50'
]}>
  <p class:list={[
    'text-lg font-bold mb-1',
    isPrimary ? 'text-white' : 'text-gray-900'
  ]}>{title}</p>
  {description && (
    <p class:list={[
      'text-sm mb-4',
      isPrimary ? 'text-white/80' : 'text-gray-500'
    ]}>{description}</p>
  )}
  <a
    href={affiliateUrl}
    target="_blank"
    rel="noopener sponsored"
    class:list={[
      'inline-flex items-center gap-2 rounded-lg px-6 py-3 text-sm font-semibold transition',
      isPrimary
        ? 'bg-white text-primary hover:bg-gray-100'
        : 'bg-primary text-white hover:bg-secondary'
    ]}
  >
    {affiliateLabel}
    <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="M13 7l5 5m0 0l-5 5m5-5H6" />
    </svg>
  </a>
  <p class:list={[
    'text-[10px] mt-3',
    isPrimary ? 'text-white/60' : 'text-gray-400'
  ]}>Affiliate link â€” we may earn a commission at no extra cost to you.</p>
</div>
