---
/**
 * Article/BlogPosting JSON-LD structured data.
 * Add to every blog post page for SEO.
 */

export interface Props {
  title: string;
  description?: string;
  publishDate?: Date;
  updateDate?: Date;
  author?: string;
  image?: string;
  url: string;
  category?: string;
}

const { title, description, publishDate, updateDate, author, image, url, category } = Astro.props;

const jsonLd: Record<string, unknown> = {
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": title,
  "url": url,
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": url,
  },
  "publisher": {
    "@type": "Organization",
    "name": "Pro Trainer Prep",
    "url": "https://protrainerprep.com",
    "logo": {
      "@type": "ImageObject",
      "url": "https://protrainerprep.com/favicon.svg",
    },
  },
};

if (description) jsonLd.description = description;
if (author) jsonLd.author = { "@type": "Person", "name": author };
if (publishDate) jsonLd.datePublished = publishDate.toISOString();
if (updateDate) jsonLd.dateModified = updateDate.toISOString();
else if (publishDate) jsonLd.dateModified = publishDate.toISOString();
if (image) jsonLd.image = image;
if (category) jsonLd.articleSection = category;
---

<script type="application/ld+json" set:html={JSON.stringify(jsonLd)} />
