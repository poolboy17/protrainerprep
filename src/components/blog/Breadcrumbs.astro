---
interface BreadcrumbItem {
  label: string;
  href: string;
  tier?: string;
}

interface Props {
  items: BreadcrumbItem[];
}

const { items } = Astro.props;

// Last item is the current page
const lastItem = items[items.length - 1];
const parentItems = items.slice(0, -1);

// JSON-LD BreadcrumbList
const jsonLd = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  itemListElement: items.map((item, i) => ({
    "@type": "ListItem",
    position: i + 1,
    name: item.label,
    item: item.href.startsWith("http") ? item.href : `https://protrainerprep.com${item.href}`,
  })),
};
---

<nav aria-label="Breadcrumb" class="not-prose mb-5 flex items-center gap-1.5 flex-wrap text-sm">
  {parentItems.map((item, i) => (
    <Fragment>
      <a 
        href={item.href} 
        class="text-gray-400 hover:text-green-400 dark:text-gray-400 dark:hover:text-indigo-400 transition-colors"
      >
        {item.label}
      </a>
      <span class="text-gray-400 dark:text-gray-600 mx-0.5">&rsaquo;</span>
    </Fragment>
  ))}
  <span class="text-gray-200 dark:text-gray-200 font-medium">
    {lastItem?.label.length > 50 ? lastItem.label.substring(0, 47) + "..." : lastItem?.label}
  </span>
</nav>

<script type="application/ld+json" set:html={JSON.stringify(jsonLd)} />
